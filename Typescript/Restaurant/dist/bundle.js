(()=>{"use strict";function n(n,e){this.name=n,this.time=e}function e(n){this.name=n,this.status="ready"}function t(n,e){this.name=n,this.status="ready",this.time=e}e.prototype.isAvailable=function(){return"ready"===this.status},e.prototype.cookAsync=function(n){var e=this;return new Promise((function(t){setTimeout((function(){e.status="ready",t(n)}),n.time)}))},t.prototype.isAvailable=function(){return"ready"===this.status},t.prototype.servingAsync=function(n){var e=this;return new Promise((function(t){setTimeout((function(){e.status="ready",t(n)}),e.time)}))};var o=[],i=[],s=[],r=[new e("영모"),new e("현우")],c=[new t("종빈",1e3),new t("재희",2e3)];function u(n,e){var t=document.getElementById(n);t.innerHTML="",e.forEach((function(n){var e=document.createElement("li");e.textContent=n.name,t.append(e)}))}function a(n){o.push(n),u("orders",o),new Promise((function(n,e){var t=setInterval((function(){console.log("요리사를 찾는 중입니다...");for(var e=0;e<r.length;e++)if(r[e].isAvailable())return clearInterval(t),r[e].status="cooking",console.log(r[e].name+"가 요리할께"),void n(r[e])}),1e3)})).then((function(n){return function(n){var e=o.shift();return i.push(e),console.log(n.name+"가 "+e.name+"을 요리중..."),u("orders",o),u("cookings",i),n.cookAsync(e)}(n)})).then((function(){return new Promise((function(n,e){var t=setInterval((function(){console.log("서빙할 사람을 찾는 중입니다...");for(var e=0;e<c.length;e++)if(c[e].isAvailable())return clearInterval(t),c[e].status="cooking",console.log(c[e].name+"가 서빙할께"),void n(c[e])}),1e3)}))})).then((function(e){return function(n,e){var t=i.splice(i.indexOf(n),1)[0];return console.log(e.name+"가"+t.name+"을 서빙중..."),s.push(t),u("cookings",i),u("servings",s),e.servingAsync(n)}(n,e)})).then((function(n){console.log(n.name+"서빙완료"),s.splice(s.indexOf(n),1),u("servings",s)}))}document.getElementById("sundea").onclick=function(){a(new n("순댓국",1e3))},document.getElementById("hejang").onclick=function(){a(new n("해장국",2e3))}})();